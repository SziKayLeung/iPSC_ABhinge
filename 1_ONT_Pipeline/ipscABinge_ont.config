## ---------------------------
##
## Author: Szi Kay Leung
##
## Email: sl693@exeter.ac.uk
##
## ---------------------------

## ---------------------------

## Output name and relevant info
export NAME=ipscABhinge
export SPECIES=hg38

## Output root directory filepath (ensure path exists)
WKD_ROOT=/lustre/projects/Research_Project-MRC148213/sl693/ipscABhinge
export samplename=ipsc


## ---------------------------

## Source functions and scripts directory 
export SC_ROOT=/gpfs/mrc0/projects/Research_Project-MRC148213/sl693/scripts/iPSC_ABhinge
export GENERALFUNC=/gpfs/mrc0/projects/Research_Project-MRC148213/sl693/scripts/General/2_Transcriptome_Annotation
export TAMAFUNC=/gpfs/mrc0/projects/Research_Project-MRC148213/sl693/scripts/General/2_Transcriptome_Annotation/TAMA

## ---------------------------

## Reference 

export REFERENCE=/gpfs/mrc0/projects/Research_Project-MRC148213/sl693/references
export GENOME_FASTA=$REFERENCE/human/hg38.fa
export GENOME_GTF=$REFERENCE/annotation/gencode.v40.annotation.gtf

## ---------------------------

## Long read data 

# For Demultiplexing Samples
BARCODE_CONFIG=$SC_ROOT/1_ONT_Pipeline/ont_barcode.csv
SAMPLE_NAMES=($(awk -F "\"*,\"*" '{print $1}' ${BARCODE_CONFIG}))

## ---------------------------

## Software 
export SOFTDIR=/gpfs/mrc0/projects/Research_Project-MRC148213/sl693/software

export MINIONQC=${SOFTDIR}/minion_qc/MinIONQC.R
export PORECHOP=${SOFTDIR}/Porechop/porechop-runner.py
export TCLEAN=${SOFTDIR}/TranscriptClean/TranscriptClean.py
export CUPCAKE=${SOFTDIR}/Post_Isoseq3/cDNA_Cupcake
export ANNOTATION=$CUPCAKE/annotation
export SEQUENCE=$CUPCAKE/sequence
export PYTHONPATH=$PYTHONPATH:$SEQUENCE
export SQANTI2_dir=${SOFTDIR}/Post_Isoseq3/SQANTI2
export SQANTI3_DIR=${SOFTDIR}/SQANTI3
export SQ_Report=${SOFTDIR}/Post_Isoseq3/SQANTI2/utilities/SQANTI_report2.R
export TAPPAS_dir=${SOFTDIR}/TAPPAS
export TAMA_DIR=${SOFTDIR}/tama/tama_go/filter_transcript_models
export ISOANNOT=${SOFTDIR}/SQANTI3/utilities/IsoAnnotLite_SQ3.py

## ---------------------------

## Software input files

# CPAT input files
export HEXAMER=${REFERENCE}/CPAT/Human_Hexamer.tsv
export LOGITMODEL=${REFERENCE}/CPAT/Human_logitModel.RData

## ---------------------------

## Internal Scripts 
SUBSETPOLYTAILS=$GENERALFUNC/subset_polyA_polyT.py
TALONCONFIGGEN=$GENERALFUNC/generate_talon_config.R

DEMUXFUNCTIONS=$GENERALFUNC/Demultiplex_Cupcake.R
KALLSTOINPUT=$GENERALFUNC/TabSeparated_Kallisto.R 
TAMAMERGE=$TAMAFUNC/TAMA_Merge_Prepare.R
TAMASUBSET=$GENERALFUNC/TAMA/tama_sqanti_classgtfsubset.R
TAMASUBSETFASTA=$GENERALFUNC/TAMA/tama_sqanti_fastasubset.py
CCSQC=$GENERALFUNC/IsoSeq_QC/CCS.py
LIMAQC=$GENERALFUNC/IsoSeq_QC/LIMA.py
ISMREMOVE=$GENERALFUNC/3ISM_remove_classification.R
MERGEFL=$GENERALFUNC/merge_FL_abundance.R
COLOURTRANS=$GENERALFUNC/colour_common_targeted_transcripts.py
BESTORF=$GENERALFUNC/extract_fasta_bestorf.py
TGENEPREP=$GENERALFUNC/subset_reference_by_gene.py
FULLANNO=$GENERALFUNC/annotate_common_targeted_transcripts_final.py


## ---------------------------
cd ${WKD_ROOT}
mkdir -p 1_minimap 2_tclean 3_align 4_collapse 5_sqanti3